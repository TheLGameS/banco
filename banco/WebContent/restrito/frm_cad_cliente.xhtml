<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	>
	
	 
	
	
<!-- 	onkeydown="if (event.keyCode == 32) {PF('tela').show(); return false; }" -->
	
<ui:composition template="/templates/internaDesktop.xhtml">
	
	<ui:define name="corpo" >

		<p:dialog  appendToBody="true" closable="true" draggable="false"
                  header="Cliente" maximizable="false" minimizable="false"
                  resizable="false"   visible="true" 
                  position="center"     width="94%"  height="515" onHide="redirecionar();"   
                  closeOnEscape="true"  style="margin-top:0.5%" id="idDlgCliente" widgetVar="dlgCliente" 
                  > 

		<h:form id="cadCliente"  >
				<p:messages id="messageGe"   autoUpdate="false" closable="true" showIcon="false" globalOnly="true"/>


				<p:toolbar>
					<f:facet name="left"  >
						<h:panelGrid columns="2" >
							<p:outputLabel for="situacao" value="Situação" />
							<p:selectOneMenu id="situacao" value="#{clienteBean.tipoLista}"	>
								<f:selectItem itemLabel="Ativos" itemValue="0" />
								<f:selectItem itemLabel="Inativos" itemValue="1" />
								<f:selectItem itemLabel="Ambos" itemValue="2" />
							</p:selectOneMenu>
						</h:panelGrid>	
					</f:facet>
					<f:facet name="right"  >
						<p:commandButton value="Consultar" id="btn" action="#{clienteBean.consulta}"  icon="fa fa-filter"   update="cadCliente:cliente"  >
							<p:ajaxStatus onstart="PF('statusDialog').show()" onsuccess="PF('statusDialog').hide()" />
						</p:commandButton>
					</f:facet>
				</p:toolbar>

			
				<p:dataTable value="#{clienteBean.listaTelaWeb}"
					resizableColumns="true" draggableColumns="false" id="cliente"
					var="clienteVO" rows="10" paginator="true" sortMode="multiple"
					paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
					currentPageReportTemplate="Visualizando {startRecord} - {endRecord} de {totalRecords} -  Página: {currentPage}/{totalPages}"
					paginatorPosition="bottom" emptyMessage="Não existe dados para a Consulta."
					scrollable="false"     liveResize="true"    styleClass=".ui-datatable-hor-scroll" tableStyle="table-layout:auto;width:100%;"  
					>
						 							
				 	<p:column headerText="Ações"   width="85"  id="acoes"  resizable="true" exportable="false"   >
						<div align="center"  >
								<p:commandButton action="#{clienteBean.obterPorId()}"  update=":dlgIncluir" resetValues="true"
									icon="ui-icon-pencil"   title="Alterar" oncomplete="PF('dlgIncluir').show();">
									<f:setPropertyActionListener value="#{clienteVO}" target="#{clienteBean.clienteVO}"  />
									<f:setPropertyActionListener value="#{true}" target="#{clienteBean.podeAlterar}"  />
									<f:ajax  update=":dlgIncluir:dlg:sit"  />
								</p:commandButton>
								
								<p:commandButton  update=":confirmacao,:cadCliente:cliente ,:cadCliente:messageGe" icon="ui-icon-trash" title="Excluir"   
									onclick="PF('confirmation').show();"  action="#{clienteBean.excluir()}"  id="btnExclui">
									<p:confirm  icon="ui-icon-blank" message="Confirma a exclusão ?"   />
									<f:setPropertyActionListener  value="#{clienteVO}" target="#{clienteBean.clienteVO}"  />
									<p:ajax  delay="500" update="cliente" listener="#{clienteBean.reiniciaTabela()}"  />
								</p:commandButton>
								
								<p:commandButton action="#{clienteBean.obterPorId()}"
									icon="ui-icon-search"   title="Visualizar"  update=":dlgIncluir" resetValues="true"
									oncomplete="PF('dlgIncluir').show();"  >
									<f:setPropertyActionListener value="#{clienteVO}" target="#{clienteBean.clienteVO}"  />
									<f:setPropertyActionListener value="#{false}" target="#{clienteBean.podeAlterar}"  />
								</p:commandButton>
						</div>	
					</p:column> 
					
 
			  	   <c:forEach var="column" items="#{clienteBean.tela}"  >
			  	   
			  	   
            		<p:column headerText="#{column.TLW_DES}"  rendered="#{column.TLW_DEF eq 'S' }" id="#{column.TWU_CPO}"  sortBy="#{clienteVO[column.TWU_CPO]}"   filterBy="#{clienteVO[column.TWU_CPO]}"  filterMatchMode="#{column.filterMatchMode}" filterStyle="#{column.TWU_FIL >0 ? 'display: block' : 'display: none'}"  >
	               		
	               		<c:choose>	
	               		
		               		<c:when test="#{column.TWU_CPO.contains('colFon')  || column.TWU_CPO.contains('colFax')   || column.TWU_CPO.contains('colCel') }">
		               			<h:outputText value="#{clienteVO[column.TWU_CPO]}" converter="telefoneConverter" />
		               		</c:when>
		               		
		               		<c:when test="#{column.TWU_CPO.contains('colCep')}">
		               			<h:outputText value="#{clienteVO[column.TWU_CPO]}" converter="cepConverter" />
		               		</c:when>
		               		
		              		<c:when test="#{column.TWU_CPO.contains('cliDti')}">
		               			<h:outputText value="#{clienteVO[column.TWU_CPO]}"   >
		               				<f:convertDateTime pattern="dd/MM/yyyy" timeZone="America/Sao_Paulo"  />
		   	           			</h:outputText>
		               		</c:when>
		               		
		               		<c:when test="#{column.TWU_CPO.contains('cliDtf')}">
		               			<h:outputText value="#{clienteVO[column.TWU_CPO]}"   >
		               				<f:convertDateTime pattern="dd/MM/yyyy" timeZone="America/Sao_Paulo"  />
		   	           			</h:outputText>
		               		</c:when>
		               		
		               		<c:when test="#{column.TWU_CPO.contains('colDti')}">
		               			<h:outputText value="#{clienteVO[column.TWU_CPO]}"   >
		               				<f:convertDateTime pattern="dd/MM/yyyy" timeZone="America/Sao_Paulo"  />
		   	           			</h:outputText>
		               		</c:when>
		               		
		               		<c:when test="#{column.TWU_CPO.contains('colInf')}">
		               			<h:outputText value="#{clienteVO[column.TWU_CPO]}" converter="documentoConverter" />
		               		</c:when>
		               		
		               		<c:otherwise>
		               			<h:outputText value="#{clienteVO[column.TWU_CPO]}"  />
		               		</c:otherwise>	
		               		
	               		</c:choose>
	               		
           			</p:column>
           			
        		</c:forEach>      
 
 				 
 			</p:dataTable>
			
				
	
		</h:form>


		<h:form id="configuracao"   >
		
		
		<p:toolbar>
					<f:facet name="left"  >
						<p:commandButton value="Incluir"  icon="ui-icon-plusthick" 	action="#{clienteBean.novo()}" oncomplete="PF('dlgIncluir').show();" 
						update=":dlgIncluir" >
						<f:setPropertyActionListener value="#{true}" target="#{clienteBean.podeAlterar}"  />
						<f:setPropertyActionListener value="#{true}" target="#{clienteBean.podeDigitarDocumento}"  />
						</p:commandButton>
					</f:facet>
					<f:facet name="right">
					
					 	 
						 <p:commandButton  id="dynaButton" value="Outras Ações" type="button" icon="fa fa-bars" />
						 
						 
					     <p:menu overlay="true" trigger="dynaButton" my="left top" at="left bottom"  >
									<p:submenu label="Configurar Tela">								   
								   		<p:menuitem value="Coluna Visíveis" icon="ui-icon-calculator" 	id="menuTabela"  onclick="clickBotaoTabela()"   />
						            	<p:menuitem value="Forma de Pesquisa" icon="ui-icon-lightbulb" 	    id="menuFiltro"  onclick="clickBotaoFiltro()"   />
									</p:submenu>

								<p:submenu label="Exportar">	
						           <p:menuitem>
							           <h:commandLink styleClass="ui-menuitem-link" >
										   <p:graphicImage name="/imagens/pdf.png" width="8%" style="float:left"/>
										   <h:outputText value="Formato PDF" styleClass="ui-menuitem-text" />
										   <p:dataExporter type="pdf" target=":cadCliente:cliente" fileName="rel" orientation="Landscape" encoding="ISO-8859-1" />
						   			   </h:commandLink>
						           </p:menuitem>
						           
						           <p:menuitem>
							           <h:commandLink styleClass="ui-menuitem-link" >
										   <p:graphicImage name="/imagens/excel.png" width="8%" style="float:left"/>
										   <h:outputText value="Formato Excel" styleClass="ui-menuitem-text" />
										   <p:dataExporter type="xls" target=":cadCliente:cliente" fileName="rel" />
						   			   </h:commandLink>
						           </p:menuitem>
						           </p:submenu>
						           
						           
					     </p:menu>  

						
    
						<p:commandButton title="Tabela" icon="ui-icon-calculator" 	id="botaoTabela"    actionListener="#{clienteBean.escolhaCamposTabela()}"  style="display:none" >
							<p:ajax  event="dialogReturn"   listener="#{clienteBean.preDestroy()}" update=":cadCliente" />
							<f:setPropertyActionListener value="#{clienteBean.telaWebUsuario}" target="#{telaWebCamposBean.telaWebUsuario}" />
							<f:setPropertyActionListener value="#{clienteBean.nomeJanela}" target="#{telaWebCamposBean.nomeJanela}" />
						</p:commandButton>
						
						<p:commandButton title="Filtro" icon="ui-icon-lightbulb" 	id="botaoFiltro"    actionListener="#{clienteBean.escolhaTipoFiltro()}"  style="display:none" >
							<p:ajax  event="dialogReturn"   listener="#{clienteBean.preDestroy()}" update=":cadCliente" />
							<f:setPropertyActionListener value="#{clienteBean.telaWebUsuario}" target="#{tipoFiltroBean.telaWebUsuario}" />
							<f:setPropertyActionListener value="#{clienteBean.nomeJanela}" target="#{tipoFiltroBean.nomeJanela}" />
						</p:commandButton>
						
					<script type="text/javascript"> 
           				function clickBotaoTabela() { 
                			document.getElementById("configuracao:botaoTabela").click();
          			  	}
           				function clickBotaoFiltro() { 
                			document.getElementById("configuracao:botaoFiltro").click();
          			  	}
       			 	</script> 
						  
						
					</f:facet>
				</p:toolbar>
		
		
		</h:form>






		
		<h:form id="confirmacao" >
		    <p:confirmDialog    severity="alert" widgetVar="confirmation"  global="true" closeOnEscape="true" closable="false" >
    	    	<center>
    	    		<p:commandButton value="Sim" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" actionListener="#{clienteBean.excluir}" process="@form" update=":cadCliente:cliente"   > 
    					<f:setPropertyActionListener  value="#{clienteVO}" target="#{clienteBean.clienteVO}"  />
    				</p:commandButton>
		        	<p:commandButton value="Não" type="button" styleClass="ui-confirmdialog-no"    icon="ui-icon-close"/>
		        </center>
    		</p:confirmDialog>
		</h:form>
				
		</p:dialog>
		
		
			<p:dialog id="dlgIncluir" widgetVar="dlgIncluir" resizable="false"  modal="true" draggable="false"  onShow="PF('tabView').select(0)"  
			header="Cadastro de Clientes"   location="center" closable="false" closeOnEscape="false" height="630" width="52%"  >
			
			<p:messages id="cadastro" showIcon="false" closable="true" globalOnly="true" ></p:messages> 


		           <h:form  id="dlg"  onkeypress="if (event.keyCode == 13) { return false;}" >
					   <c:choose>	
						   <c:when test="#{clienteBean.podeDigitarDocumento eq true  }">
			       			   <p:focus  context="dlg"  for="documento" ></p:focus>
						   </c:when>
					
						   <c:when test="#{clienteBean.podeDigitarDocumento eq false and clienteBean.podeAlterar eq true  }">
				       		   <p:focus  context="dlg"  for="apelido" ></p:focus>
						   </c:when>
					
					       <c:when test="#{clienteBean.podeDigitarDocumento eq false and clienteBean.podeAlterar eq false}"  >
						 	   <p:focus  context="dlg"  for="btnCancela" ></p:focus>
					       </c:when>
				       </c:choose>	
				
					<p:fieldset >
						<h:panelGrid    columns="2" id="panelDlg"   styleClass="semBorda" >
							
							<p:outputLabel value="Código" for="codigo"/>				
							<h:panelGrid  columns="10" >
								<p:inputText id="codigo" value="#{clienteBean.colaborador.colCod}" 
									maxlength="7" 
									readonly="true"  
									style="padding-right: 5px; float: right; width:45px " />
								
								<p:selectOneMenu id="pcbTipo" value="#{clienteBean.colaborador.colTip}"    disabled="true" 
									style="width:70px" effect="drop"   >
									<f:selectItem itemLabel="CNPJ" itemValue="CNPJ" />
									<f:selectItem itemLabel="CPF"  itemValue="CPF"  />
									<f:selectItem itemLabel="CEI"  itemValue="CEI"  />
									<f:selectItem itemLabel="EX"  itemValue="EX"  />
								</p:selectOneMenu>
								<p:inputText id="documento" value="#{clienteBean.colaborador.colInf}" style="width:120px" maxlength="18" readonly="#{!clienteBean.podeDigitarDocumento}" required="true" requiredMessage="Campo Documento é Obrigatório"    onkeypress="return somenteNumero(event)"   >
	    							<p:ajax event="change"   listener="#{clienteBean.buscaColaborador()}"  update="dlg"  />
	    							
	    							<c:if test="#{clienteBean.colaborador.colInf.trim().length() eq 0}">
		       			 				<p:focus for="documento" >  </p:focus>
									</c:if>
									
									
	    						</p:inputText>
	    						
								    						
		   						<p:commandLink title="Receita" id="botaoReceita" actionListener="#{clienteBean.frmReceitaFederal()}"   immediate="true"  rendered="#{clienteBean.podeAlterar}"   > 
									<p:ajax  event="dialogReturn" listener="#{clienteBean.retornoFrmReceitaFederal}"  update="dlg"   />
									<f:setPropertyActionListener value="#{clienteBean.documentoSemMascara}" target="#{receitaFederalBean.documentoSemMascara}"   />
									<p:graphicImage name="/imagens/logo_receita.png"  />
								</p:commandLink>
										
								<p:blockUI block="dlg"  widgetVar="bui"  trigger="botaoReceita, dlg:tabExterna:botaoSintegra"  id="block" />								
								
									 
								<p:outputLabel value="Apelido" for="apelido"/>
								<p:inputText id="apelido" value="#{clienteBean.colaborador.colApe}" style="width:125px; text-transform: uppercase" maxlength="15" readonly="#{!clienteBean.podeAlterar}" 		converter="toUpperCaseConverter"  onkeypress="return focoEnter(event)" >
	    							<f:ajax event="blur" render="@this" />
								</p:inputText>		
							</h:panelGrid>
								
							<p:outputLabel value="Nome" for="polRazaoSocial" id="razao" />
							<h:panelGrid   columns="2" id="panelRazao">
								<p:inputText id="polRazaoSocial" value="#{clienteBean.colaborador.colRaz}"
									required="true"
									requiredMessage="Campo Nome é Obrigatório" 
									style="width:465px; text-transform: uppercase" maxlength="50" readonly="#{!clienteBean.podeAlterar}"  
									converter="toUpperCaseConverter"    >
	    					<p:ajax event="blur"  render="@this" update="dlg:panelRazao, dlg:razao" />
							</p:inputText>		
							<p:message for="polRazaoSocial" display="icon" severity="info" />
									
							</h:panelGrid>
							
							<p:outputLabel value="Nome Fantasia" for="polNmFantasia" />
							<h:panelGrid   columns="1">
								<p:inputText id="polNmFantasia" value="#{clienteBean.colaborador.colNmf}" style="width:465px; text-transform: uppercase" maxlength="50" readonly="#{!clienteBean.podeAlterar}" 		converter="toUpperCaseConverter">
	    					<f:ajax event="blur" render="@this" />
							</p:inputText>		
							</h:panelGrid>
							
							<p:outputLabel id="grupoTabView" />
							<h:panelGrid columns="1">							
								<p:tabView id="tabExterna"    widgetVar="tabView"  >
									<p:tab title="Informações Cadastrais"  id="tabCadastro" >
									
									
									<h:panelGrid columns="2">
									
										<p:outputLabel value="CEP" for="cep" id="nmCep"/>
										<h:panelGrid   columns="10"  id="panelCep" >
											<p:inputMask id="cep" value="#{clienteBean.colaborador.colCep}" maxlength="9" style="width:60px" mask="99999-999" required="true" requiredMessage="Campo CEP é Obrigatório" readonly="#{!clienteBean.podeAlterar}" >
												<p:ajax  event="blur" listener="#{clienteBean.encontraCEP(true,false,false)}"   update="dlg:tabExterna:panelCep, dlg:tabExterna:nmCep, dlg:tabExterna:municipio, dlg:tabExterna:endereco, dlg:tabExterna:ender, dlg:tabExterna:bairro , cadastro, dlg:tabExterna:panelMunicipio" onstart="PF('statusDialog').show()" onsuccess="PF('statusDialog').hide()"   />
												<p:ajax  event="blur" listener="#{clienteBean.validaIe()}"    update="dlg:tabExterna:ie,cadastro,dlg:tabExterna:lbIeRg" />																																				
												
											</p:inputMask>
											<p:message for="cep" display="icon" severity="info" />
											<p:outputLabel value="Caixa Postal" for="cp" />
											<p:inputText id="cp" value="#{clienteBean.colaborador.colCxp}" readonly="#{!clienteBean.podeAlterar}"   style="width:76px  ; text-transform: uppercase"  maxlength="15"	converter="toUpperCaseConverter">
    											<f:ajax event="blur" render="@this"  />
											</p:inputText>
											
										</h:panelGrid>
										
										<p:outputLabel value="Endereço" for="end" id="endereco" />
										<h:panelGrid  columns="4" id="ender"   >
											<p:inputText   id="end" value="#{clienteBean.colaborador.colEnd}"  maxlength="40" style="width:285px; text-transform: uppercase" required="true" requiredMessage="Campo Endereço é Obrigatório" readonly="#{!clienteBean.podeAlterar}" 		converter="toUpperCaseConverter">
				    							<p:ajax event="blur" render="@this" update="dlg:tabExterna:endereco, dlg:tabExterna:ender"  />
											</p:inputText>		
											<p:outputLabel value="Número" for="numero" />
											<p:inputText   id="numero" value="#{clienteBean.colaborador.colNro}"  maxlength="7" readonly="#{!clienteBean.podeAlterar}"  style="width:50px"  onkeypress="return somenteNumero(event)"  >
				    							<p:ajax event="blur" listener="#{clienteBean.validaIe()}" update="dlg:tabExterna:ie,cadastro,dlg:tabExterna:lbIeRg" />
											</p:inputText>	
											<p:message for="end" display="icon" severity="info" />
										</h:panelGrid>
										
						
										<p:outputLabel value="Complemento" for="comp" id="retornoCep"/>
										<h:panelGrid columns="3" id="panelBairro"   >
											<p:inputText id="comp" value="#{clienteBean.colaborador.colCpl}"  maxlength="20" style="width:175px; text-transform: uppercase" readonly="#{!clienteBean.podeAlterar}" 		converter="toUpperCaseConverter">
				    					<f:ajax event="blur" render="@this" />
										</p:inputText>		
										<p:outputLabel value="Bairro" for="bairro" />
											<p:inputText id="bairro" value="#{clienteBean.colaborador.colBai}"    readonly="#{!clienteBean.podeAlterar}" maxlength="20" style="width:172px; text-transform: uppercase" 	converter="toUpperCaseConverter">
				    							<f:ajax event="blur" render="@this"  />
											</p:inputText>		
										</h:panelGrid>
										
										
										
										<p:outputLabel for="uf" value="Município" id="municipio" />
										<h:panelGrid columns="4" id="panelMunicipio"   >
											<p:inputText id="uf"   maxlength="6" size="3" value="#{clienteBean.municipioExibidoDialog.munCod}" required="true" readonly="#{!clienteBean.podeAlterar}"   requiredMessage="Campo Município é Obrigatório" onkeypress="return somenteNumero(event)"    >
												<p:ajax event="change" update="dlg:tabExterna:panelMunicipio, dlg:tabExterna:municipio" listener="#{clienteBean.buscaMunicipio(true,false,false)}"    />
				 							</p:inputText>
				 							
											<p:inputText id="ufnome" value="#{clienteBean.municipioExibidoDialog.munNom}"    readonly="true"  style="width:270px" />
											<p:inputText id="descUF" size="1" value="#{clienteBean.municipioExibidoDialog.estado.estSig}" readonly="true"    />
											
											<p:commandButton value="..."    id="botaoConsulta"     actionListener="#{clienteBean.escolhaDeMunicipio()}" immediate="true"  disabled="#{!clienteBean.podeAlterar}" >
												<p:ajax event="dialogReturn" listener="#{clienteBean.retornoMunicipioSelecionado}"   update="ufnome, uf, descUF"  />
											</p:commandButton>
											<p:message for="uf" display="icon" severity="info" />
										</h:panelGrid>
										
										
										<p:outputLabel value="Telefone" for="telefone" />
										<h:panelGrid columns="3" id="panelFones" >
											<p:inputMask id="telefone" value="#{clienteBean.colaboradorVO.colFon}"  maxlength="14" style="width:100px" readonly="#{!clienteBean.podeAlterar}"  mask="(**)*999-9999" />
											<p:outputLabel value="Ramal" for="rm" />
											<p:inputText id="rm" value="#{clienteBean.colaborador.colRam}"  readonly="#{!clienteBean.podeAlterar}"  style="width:25px"  onkeypress="return somenteNumero(event)" maxlength="3"  />
										</h:panelGrid>
										
										<p:outputLabel value="Fax" for="fax" />
										<h:panelGrid columns="3" id="panelFaxCel" >
											<p:inputMask id="fax" value="#{clienteBean.colaboradorVO.colFax}"       maxlength="14" style="width:100px" readonly="#{!clienteBean.podeAlterar}"  mask="(**)*999-9999" />
											<p:outputLabel value="Celular" for="celular" />
											<p:inputMask id="celular" value="#{clienteBean.colaboradorVO.colCel}"   maxlength="15" style="width:100px" readonly="#{!clienteBean.podeAlterar}"  mask="(**)*999-9999" />
										</h:panelGrid>
										
										
										
										<p:outputLabel value="Contr.ICMS" for="pcbIcm"    />
										<h:panelGrid columns="6"  id="sit">
											<p:selectOneMenu id="pcbIcm" value="#{clienteBean.colaborador.colIcm}"   
												style="width:60px" effect="drop" disabled="#{!clienteBean.podeAlterar}">
												<f:selectItem itemLabel="Sim" itemValue="S" />
												<f:selectItem itemLabel="Não" itemValue="N" />
												<p:ajax  event="change"  update="@this, lbIeRg, ie" > </p:ajax>
											</p:selectOneMenu>
											
											<p:outputLabel  for="ie" id="lbIeRg"  value="#{clienteBean.colaborador.colTip.equals('CPF') ? 'RG' : 'Insc. Estadual'}" />
											<p:inputText id="ie" value="#{clienteBean.colaborador.colIne}"   readonly="#{!clienteBean.podeAlterar}"  required="#{clienteBean.colaborador.colIcm eq 'S'}"  requiredMessage="Campo IE é Obrigatório" style="width:80px; text-transform: uppercase" maxlength="20" 	converter="toUpperCaseConverter">
												<p:ajax event="blur" listener="#{clienteBean.validaIe()}" update="ie,cadastro,lbIeRg" />
				    							<f:ajax event="blur" render="@this"  />
											</p:inputText>
											
											<p:commandLink title="Sintegra" id="botaoSintegra" actionListener="#{clienteBean.frmSintegra()}"   immediate="true"  rendered="#{clienteBean.podeAlterar}" >
												<p:ajax  event="dialogReturn" listener="#{clienteBean.retornoFrmSintegra}"  update="dlg" />
												<f:setPropertyActionListener value="#{clienteBean.documentoSemMascara}" target="#{sintegraBean.documentoSemMascara}" />
													<f:setPropertyActionListener value="#{clienteBean.municipioExibidoDialog.estado.estSig}" target="#{sintegraBean.estado}" />
													<f:setPropertyActionListener value="#{clienteBean.documentoSemMascara}" target="#{sintegraBean.documentoSemMascara}" />
												<p:graphicImage name="/imagens/logo_sintegra.png"  /> 
											</p:commandLink>
											
											<p:outputLabel value="Insc. Municipal" for="im" />
											<p:inputText id="im" value="#{clienteBean.colaborador.colInm}" style="width:60px" readonly="#{!clienteBean.podeAlterar}"  maxlength="20" />
										</h:panelGrid>
										
										
										<p:outputLabel value="Email" for="email"  id="lbEmail"  />
										<h:panelGrid columns="6"  id="panelWeb">
											<p:inputText id="email" value="#{clienteBean.colaborador.colEma}"   style="width:165px" readonly="#{!clienteBean.podeAlterar}" validator="#{clienteBean.validateEmail}" validatorMessage="Erro" maxlength="50" >
												<p:ajax event="blur" update="panelWeb, lbEmail, cadastro"  />
											</p:inputText>
											
											<p:outputLabel value="Web Site" for="website" />
											<p:inputText id="website" value="#{clienteBean.colaborador.colWeb}" style="width:165px" readonly="#{!clienteBean.podeAlterar}" maxlength="50"/>
										</h:panelGrid>
												
										<p:outputLabel value="Contato" for="contato" />
										<h:panelGrid columns="1"  id="panelContatoRef">
											<p:inputText id="contato" value="#{clienteBean.colaborador.colCon}"  readonly="#{!clienteBean.podeAlterar}"  style="width:396px; text-transform: uppercase"  maxlength="50"	converter="toUpperCaseConverter">
			    							<f:ajax event="blur" render="@this"  />
										</p:inputText>	
										</h:panelGrid>
																					
										<p:outputLabel value="#{clienteBean.colaborador.colTip.equals('CPF') ? 'Data Nascimento' : 'Fundação'}" for="data"  id="lbFundDtNasc" />
										<h:panelGrid columns="3" id="panelLocal" >
											<p:calendar id="data" value="#{clienteBean.colaborador.colDti}" size="16" pattern="dd-MM-yyyy" mask="true"  locale="pt"  readonly="#{!clienteBean.podeAlterar}" />
											<p:outputLabel value="Data Inativo" for="inativo"  id="lbInativo" />											
											<p:calendar id="inativo" value="#{clienteBean.cliente.cliDtf}" size="16" pattern="dd-MM-yyyy" mask="true"  locale="pt"  readonly="#{!clienteBean.podeAlterar}" />
										</h:panelGrid>		
										
										
										</h:panelGrid>				
									</p:tab>
									
									<p:tab title="Entrega"  id="tabEntrega" >
									
									 
									<h:panelGrid   columns="2"  >
									
										<p:outputLabel value="CEP" for="cepEntrega" id="nmCepEntrega"/>
										<h:panelGrid   columns="1"  id="panelCepEntrega" >
											<p:inputMask id="cepEntrega" value="#{clienteBean.cliente.cliEce}" maxlength="9" style="width:60px" mask="99999-999" required="false" requiredMessage="Campo CEP é Obrigatório" readonly="#{!clienteBean.podeAlterar}" >
												<p:ajax  event="blur" listener="#{clienteBean.encontraCEP(false,true,false)}"   update="dlg:tabExterna:panelCepEntrega, dlg:tabExterna:nmCepEntrega, dlg:tabExterna:municipioEntrega, dlg:tabExterna:enderecoEntrega, dlg:tabExterna:enderEntrega, dlg:tabExterna:bairroEntrega , cadastro, dlg:tabExterna:panelMunicipioEntrega" onstart="PF('statusDialog').show()" onsuccess="PF('statusDialog').hide()"   />
											</p:inputMask>
											<p:message for="cepEntrega" display="icon" severity="info" />
																						
										</h:panelGrid>
										
										<p:outputLabel value="Endereço" for="endEntrega" id="enderecoEntrega" />
										<h:panelGrid  columns="4" id="enderEntrega"   >
											<p:inputText   id="endEntrega" value="#{clienteBean.cliente.cliEen}"  maxlength="40" style="width:285px; text-transform: uppercase" required="false" requiredMessage="Campo Endereço é Obrigatório" readonly="#{!clienteBean.podeAlterar}" 		converter="toUpperCaseConverter">
				    							<p:ajax event="blur" render="@this" update="dlg:tabExterna:enderecoEntrega, dlg:tabExterna:enderEntrega"  />
											</p:inputText>		
											<p:outputLabel value="Número" for="numeroEntrega" />
											<p:inputText   id="numeroEntrega" value="#{clienteBean.cliente.cliEnu}"  maxlength="7" readonly="#{!clienteBean.podeAlterar}"  style="width:50px"  onkeypress="return somenteNumero(event)"  />
											<p:message for="endEntrega" display="icon" severity="info" />
										</h:panelGrid>
										
						
										<p:outputLabel value="Complemento" for="compEntrega" id="retornoCepEntrega"/>
										<h:panelGrid columns="3" id="panelBairroEntrega"   >
											<p:inputText id="compEntrega" value="#{clienteBean.cliente.cliEcp}"  maxlength="20" style="width:175px; text-transform: uppercase" readonly="#{!clienteBean.podeAlterar}" 		converter="toUpperCaseConverter">
				    							<f:ajax event="blur" render="@this" />
											</p:inputText>		
										<p:outputLabel value="Bairro" for="bairroEntrega" />
											<p:inputText id="bairroEntrega" value="#{clienteBean.cliente.cliEba}"    readonly="#{!clienteBean.podeAlterar}" maxlength="20" style="width:172px; text-transform: uppercase" 	converter="toUpperCaseConverter">
				    							<f:ajax event="blur" render="@this"  />
											</p:inputText>		
										</h:panelGrid>
										
										<p:outputLabel for="ufEntrega" value="Município" id="municipioEntrega" />
										<h:panelGrid columns="4" id="panelMunicipioEntrega"   >
											<p:inputText id="ufEntrega"   maxlength="6" size="3" value="#{clienteBean.municipioCliEmu.munCod}" required="false" readonly="#{!clienteBean.podeAlterar}"   requiredMessage="Campo Município é Obrigatório" onkeypress="return somenteNumero(event)"    >
												<p:ajax event="change" update="dlg:tabExterna:panelMunicipioEntrega, dlg:tabExterna:municipioEntrega" listener="#{clienteBean.buscaMunicipio(false,true,false)}"    />
				 							</p:inputText>
				 							
											<p:inputText id="ufnomeEntrega" value="#{clienteBean.municipioCliEmu.munNom}"    readonly="true"  style="width:270px" />
											<p:inputText id="descUFEntrega" size="1" value="#{clienteBean.municipioCliEmu.estado.estSig}" readonly="true"    />
											
											<p:commandButton value="..."    id="botaoConsultaEntrega"     actionListener="#{clienteBean.escolhaDeMunicipio()}" immediate="true"  disabled="#{!clienteBean.podeAlterar}" >
												<p:ajax event="dialogReturn" listener="#{clienteBean.retornoMunicipioCliEmu}"   update="ufnomeEntrega, ufEntrega, descUFEntrega"  />
											</p:commandButton>
											<p:message for="ufEntrega" display="icon" severity="info" />
										</h:panelGrid>
									
									
									</h:panelGrid>
									
																					
									
									</p:tab>
									
									
									<p:tab title="Cobrança"  id="tabCobranca" >
									
									<h:panelGrid   columns="2"  >
									
										<p:outputLabel value="CEP" for="cepCobranca" id="nmCepCobranca"/>
										<h:panelGrid   columns="1"  id="panelCepCobranca" >
											<p:inputMask id="cepCobranca" value="#{clienteBean.cliente.cliCce}" maxlength="9" style="width:60px" mask="99999-999" required="false" requiredMessage="Campo CEP é Obrigatório" readonly="#{!clienteBean.podeAlterar}" >
												<p:ajax  event="blur" listener="#{clienteBean.encontraCEP(false,false,true)}"   update="dlg:tabExterna:panelCepCobranca, dlg:tabExterna:nmCepCobranca, dlg:tabExterna:municipioCobranca, dlg:tabExterna:enderecoCobranca, dlg:tabExterna:enderCobranca, dlg:tabExterna:bairroCobranca , cadastro, dlg:tabExterna:panelMunicipioCobranca" onstart="PF('statusDialog').show()" onsuccess="PF('statusDialog').hide()"   />
											</p:inputMask>
											<p:message for="cepCobranca" display="icon" severity="info" />
																						
										</h:panelGrid>
										
										<p:outputLabel value="Endereço" for="endCobranca" id="enderecoCobranca" />
										<h:panelGrid  columns="4" id="enderCobranca"   >
											<p:inputText   id="endCobranca" value="#{clienteBean.cliente.cliCen}"  maxlength="40" style="width:285px; text-transform: uppercase" required="false" requiredMessage="Campo Endereço é Obrigatório" readonly="#{!clienteBean.podeAlterar}" 		converter="toUpperCaseConverter">
				    							<p:ajax event="blur" render="@this" update="dlg:tabExterna:enderecoCobranca, dlg:tabExterna:enderCobranca"  />
											</p:inputText>		
											<p:outputLabel value="Número" for="numeroCobranca" />
											<p:inputText   id="numeroCobranca" value="#{clienteBean.cliente.cliCnu}"  maxlength="7" readonly="#{!clienteBean.podeAlterar}"  style="width:50px"  onkeypress="return somenteNumero(event)"  />
											<p:message for="endCobranca" display="icon" severity="info" />
										</h:panelGrid>
										
						
										<p:outputLabel value="Complemento" for="compCobranca" id="retornoCepCobranca"/>
										<h:panelGrid columns="3" id="panelBairroCobranca"   >
											<p:inputText id="compCobranca" value="#{clienteBean.cliente.cliCcp}"  maxlength="20" style="width:175px; text-transform: uppercase" readonly="#{!clienteBean.podeAlterar}" 		converter="toUpperCaseConverter">
				    							<f:ajax event="blur" render="@this" />
											</p:inputText>		
										<p:outputLabel value="Bairro" for="bairroCobranca" />
											<p:inputText id="bairroCobranca" value="#{clienteBean.cliente.cliCba}"    readonly="#{!clienteBean.podeAlterar}" maxlength="20" style="width:172px; text-transform: uppercase" 	converter="toUpperCaseConverter">
				    							<f:ajax event="blur" render="@this"  />
											</p:inputText>		
										</h:panelGrid>
										
										<p:outputLabel for="ufCobranca" value="Município" id="municipioCobranca" />
										<h:panelGrid columns="4" id="panelMunicipioCobranca"   >
											<p:inputText id="ufCobranca"   maxlength="6" size="3" value="#{clienteBean.municipioCliCmu.munCod}" required="false" readonly="#{!clienteBean.podeAlterar}"   requiredMessage="Campo Município é Obrigatório" onkeypress="return somenteNumero(event)"    >
												<p:ajax event="change" update="dlg:tabExterna:panelMunicipioCobranca, dlg:tabExterna:municipioCobranca" listener="#{clienteBean.buscaMunicipio(false,false,true)}"    />
				 							</p:inputText>
				 							
											<p:inputText id="ufnomeCobranca" value="#{clienteBean.municipioCliCmu.munNom}"    readonly="true"  style="width:270px" />
											<p:inputText id="descUFCobranca" size="1" value="#{clienteBean.municipioCliCmu.estado.estSig}" readonly="true"    />
											
											<p:commandButton value="..."    id="botaoConsultaCobranca"     actionListener="#{clienteBean.escolhaDeMunicipio()}" immediate="true"  disabled="#{!clienteBean.podeAlterar}" >
												<p:ajax event="dialogReturn" listener="#{clienteBean.retornoMunicipioCliCmu}"   update="ufnomeCobranca, ufCobranca, descUFCobranca"  />
											</p:commandButton>
											<p:message for="ufCobranca" display="icon" severity="info" />
										</h:panelGrid>
									
									
									</h:panelGrid>
									
									
									</p:tab>
									
									<p:tab title="Outras Informações"  id="tabOutros" >
									<h:panelGrid columns="2"  >
								
									<p:outputLabel value="Praça de Pagto" for="praca" />
									<h:panelGrid columns="1" id="panelPraca" >
										<p:inputText id="praca" value="#{clienteBean.cliente.cliCpp}"  readonly="#{!clienteBean.podeAlterar}"  style="width:300px"   maxlength="40"  />
									</h:panelGrid>
									
									<p:outputLabel value="Observação" />
									<h:panelGrid columns="1" id="panelOb1" >
										<p:inputText maxlength="40" value="#{clienteBean.cliente.cliOb1}" style="width:300px"  />
									</h:panelGrid>
									
									<p:outputLabel id="lbOb2"/>
									<h:panelGrid columns="1" id="panelOb2" >
										<p:inputText maxlength="40" value="#{clienteBean.cliente.cliOb2}" style="width:300px"  />
									</h:panelGrid>
									
									<p:outputLabel id="lbOb3" />
									<h:panelGrid columns="1" id="panelOb3" >
										<p:inputText maxlength="40" value="#{clienteBean.cliente.cliOb3}" style="width:300px"  />
									</h:panelGrid>
							
								
									<p:outputLabel value="Cartão Fidelidade" for="fidel" />
										<h:panelGrid columns="1" id="panelFidel" >
											<p:inputText id="fidel" value="#{clienteBean.cliente.cliCfd}"  readonly="#{!clienteBean.podeAlterar}"  style="width:50px"  onkeypress="return somenteNumero(event)" maxlength="6"  />
										</h:panelGrid>

									
										<p:outputLabel value="Simples Nacional" for="pcbSimplesNacional"   />
										<h:panelGrid columns="2"  id="panelSimples"  >
										<p:selectOneMenu id="pcbSimplesNacional" value="#{clienteBean.colaborador.colOsf}"  
											style="width:125px" effect="drop" disabled="#{!clienteBean.podeAlterar   }">
											<f:selectItem itemLabel="Não Optante" itemValue="N" />
											<f:selectItem itemLabel="Optante ME"  itemValue="M" />
											<f:selectItem itemLabel="Optante EPP" itemValue="E" />
										</p:selectOneMenu>
										</h:panelGrid>
										
										<p:outputLabel value="Responsável pelo Cadastro" for="pcbResponsavel"   />
										<h:panelGrid columns="2"  id="panelResponsavel"  >
										<p:selectOneMenu id="pcbResponsavel" value="#{clienteBean.cliente.cliRes}"  
											style="width:125px" effect="drop" disabled="#{!clienteBean.podeAlterar   }">
											<f:selectItem itemLabel="Matriz"        itemValue="1" />
											<f:selectItem itemLabel="Filial"        itemValue="2" />
											<f:selectItem itemLabel="Matriz/Filial" itemValue="3" />
										</p:selectOneMenu>
										</h:panelGrid>
										
										
										
									</h:panelGrid>
									</p:tab>
									
								</p:tabView>
							</h:panelGrid>

							<h:panelGrid columns="3"  id="fim">
								<h:inputHidden value="#{clienteBean.colaborador.colCod}" />
								<h:inputHidden value="#{clienteBean.colaborador.colTip}" />
								<h:inputHidden value="#{clienteBean.colaborador.colInf}" rendered="#{!clienteBean.podeAlterar   }"   />
						    </h:panelGrid>	
							
						</h:panelGrid>
					</p:fieldset>
				<br />
				<div align="center" id="conCan" >
					<p:commandButton value="Confirmar" id="btnGrava" action="#{clienteBean.salvar()}" update=":cadCliente, dlg:panelRazao, dlg:razao  ,dlg:tabExterna:panelCep, dlg:tabExterna:nmCep   , dlg:tabExterna:municipio ,dlg:tabExterna:endereco, dlg:tabExterna:ender , dlg:tabExterna:email, dlg:tabExterna:lbEmail "  rendered="#{clienteBean.podeAlterar}" icon="ui-icon-check" oncomplete="if (args &amp;&amp; !args.validationFailed) PF('dlgIncluir').hide();"    > 	
						<f:setPropertyActionListener value="#{false}" target="#{clienteBean.podeDigitarDocumento}"  />
					</p:commandButton> 
	
					<p:commandButton value="Cancelar" id="btnCancela" onclick="PF('dlgIncluir').hide();" icon="ui-icon-closethick"  immediate="true" ajax="true" update=":dlgIncluir" resetValues="true" process="@all"  >
						<f:setPropertyActionListener value="#{false}" target="#{clienteBean.podeDigitarDocumento}"  />
					</p:commandButton>
					
				</div>
			</h:form>
		           
		           
		        
				
    		
		</p:dialog>
		
		
		
		<p:dialog widgetVar="statusDialog" modal="true"     draggable="false" 
				  closable="false"         resizable="false" showHeader="false" >
					<p:graphicImage  library="imagens" name="progresso.gif" />
		</p:dialog>
		
	</ui:define>
</ui:composition>
</html>